FROM nvidia/cuda:12.9.1-cudnn-runtime-ubuntu24.04
RUN apt-get -y update && apt-get -y install festival espeak-ng python3 python3-pip

WORKDIR /application/
RUN mkdir -p /model/
RUN mkdir -p /output/

COPY ./model /model

ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1  

COPY requirements.txt .
RUN pip3 install --break-system-packages -r requirements.txt 
RUN pip3 install --break-system-packages onnxruntime-gpu==1.23.2

COPY src/ .

EXPOSE 8888

CMD [ "python3", "server.py" ]