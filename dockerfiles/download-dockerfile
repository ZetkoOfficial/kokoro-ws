FROM python:3.12-slim-bullseye
RUN apt-get -y update && apt-get -y install wget

WORKDIR /application/
RUN mkdir -p /model/

ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1  

RUN pip3 install torch==2.8.0 --index-url https://download.pytorch.org/whl/cpu
RUN pip3 install kokoro==0.9.4
RUN pip3 install onnx==1.19.1
RUN pip3 install onnxscript==0.5.6

COPY downloader .
RUN chmod +x entrypoint.sh

CMD [ "./entrypoint.sh" ]