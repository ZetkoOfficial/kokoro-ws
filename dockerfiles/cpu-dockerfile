FROM python:3.12-slim-bullseye
RUN apt-get -y update && apt-get -y install festival espeak-ng

WORKDIR /application/
RUN mkdir -p /model/
RUN mkdir -p /output/

ENV PYTHONDONTWRITEBYTECODE 1
ENV PYTHONUNBUFFERED 1  

COPY requirements.txt .
RUN pip3 install -r requirements.txt
RUN pip3 install onnxruntime==1.23.2

COPY src/ .

EXPOSE 8888

CMD [ "python3", "server.py" ]